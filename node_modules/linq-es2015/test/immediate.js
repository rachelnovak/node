"use strict";
///////////////////////////////////////////////////////////////////////////////
//
// Licensed under the Apache License, Version 2.0  ( the  "License" );  you may 
// not use this file except in compliance with the License.  You may  obtain  a 
// copy of the License at
//
//   http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required  by  applicable  law  or  agreed  to  in  writing,  software 
// distributed under the License is distributed on an "AS  IS"  BASIS,  WITHOUT
// WARRANTIES OR CONDITIONS  OF  ANY  KIND, either express or implied.  See the 
// License for the specific  language  governing  permissions  and  limitations 
// under the License.
Object.defineProperty(exports, "__esModule", { value: true });
const data_1 = require("./data");
const chai_1 = require("chai");
const Linq = require("../lib/linq");
describe('Immediate Execution -', function () {
    // Aggregate
    it('Aggregate() - No seed', function () {
        chai_1.assert.equal(55, Linq.From(data_1.simpleArray).Aggregate((a, b) => a + b));
    });
    it('Aggregate()', function () {
        chai_1.assert.equal(3628800, Linq.From(data_1.simpleArray).Aggregate(1, (a, b) => a * b));
    });
    it('Aggregate() - Transform', function () {
        chai_1.assert.equal(1814400, Linq.From(data_1.simpleArray).Aggregate(1, (a, b) => a * b, o => o / 2));
    });
    // All
    it('All() - True', function () {
        chai_1.assert.isTrue(Linq.From(data_1.oddArray).All(b => b % 2 == 1));
    });
    it('All() - False', function () {
        chai_1.assert.isFalse(Linq.From(data_1.simpleArray).All(b => b % 2 == 1));
    });
    // Any
    it('Any() - No predicate', function () {
        chai_1.assert.isTrue(Linq.From(data_1.simpleArray).Any());
    });
    it('Any() - True', function () {
        chai_1.assert.isTrue(Linq.From(data_1.simpleArray).Any(i => i > 3));
    });
    it('Any() - False', function () {
        chai_1.assert.isFalse(Linq.From(data_1.simpleArray).Any(i => i > data_1.simpleArray.length));
    });
    // Average
    it('Average() - No predicate', function () {
        chai_1.assert.equal(4.0 / 3, Linq.From([-2, 1, 5]).Average());
    });
    it('Average()', function () {
        chai_1.assert.equal((1 + 2 + 3 + 4) / 4, Linq.From(data_1.jsn).Average(o => o.id));
    });
    // Contains
    it('Contains - True', function () {
        chai_1.assert.isTrue(Linq.From(data_1.simpleArray).Contains(4));
    });
    it('Contains - False', function () {
        chai_1.assert.isFalse(Linq.From(data_1.simpleArray).Contains(43));
    });
    // Count
    it('Count() - Array', function () {
        chai_1.assert.equal(10, Linq.From(data_1.simpleArray).Count());
    });
    it('Count() - String', function () {
        chai_1.assert.equal(10, Linq.From("1234567890").Count());
    });
    it('Count() - No predicate', function () {
        chai_1.assert.equal(10, Linq.Range(0, 10).Count());
    });
    it('Count()', function () {
        chai_1.assert.equal(5, Linq.From(data_1.simpleArray).Count(b => b % 2 == 1));
    });
    // Max
    it('Max() - No predicate', function () {
        chai_1.assert.equal(10, Linq.From(data_1.randomArray).Max());
    });
    it('Max()', function () {
        chai_1.assert.equal(4, Linq.From(data_1.jsn).Max(o => o.id));
    });
    it('Max() - Empty', function () {
        chai_1.assert.throws(function () {
            Linq.From([]).Max();
        });
    });
    // Min
    it('Min() - No predicate', function () {
        chai_1.assert.equal(1, Linq.From(data_1.randomArray).Min());
    });
    it('Min()', function () {
        chai_1.assert.equal(1, Linq.From(data_1.jsn).Min(o => o.id));
    });
    it('Min() - Empty', function () {
        chai_1.assert.throws(function () {
            Linq.From([]).Min();
        });
    });
    // ElementAt
    it('ElementAt() - Iterable', function () {
        chai_1.assert.equal(3, Linq.Range(0, 10).ElementAt(3));
    });
    it('ElementAt() - Array', function () {
        chai_1.assert.equal(6, Linq.From(data_1.simpleArray).ElementAt(5));
    });
    it('ElementAt() - Out of Range', function () {
        chai_1.assert.throw(function () {
            Linq.From(data_1.simpleArray).ElementAt(-1);
        });
        chai_1.assert.throw(function () {
            Linq.Range(0, 10).ElementAt(50);
        });
    });
    // ElementAtOrDefault
    it('ElementAtOrDefault() - Array', function () {
        chai_1.assert.equal(Linq.From(data_1.simpleArray).ElementAtOrDefault(5), 6);
    });
    it('ElementAtOrDefault() - Iterable', function () {
        chai_1.assert.equal(Linq.Range(1, 10).ElementAtOrDefault(5), 6);
    });
    it('ElementAtOrDefault() - Default of Array', function () {
        chai_1.assert.equal(Linq.From(data_1.simpleArray).ElementAtOrDefault(-500), 0);
    });
    it('ElementAtOrDefault() - Default of empty Array', function () {
        chai_1.assert.equal(Linq.From([]).ElementAtOrDefault(-500), undefined);
    });
    it('ElementAtOrDefault() - Default of Iterable', function () {
        chai_1.assert.equal(Linq.Range(1, 10).ElementAtOrDefault(500), 0);
    });
    it('ElementAtOrDefault() - Default Boolean', function () {
        chai_1.assert.isFalse(Linq.From([true, false, false]).ElementAtOrDefault(5));
    });
    it('ElementAtOrDefault() - Default Null', function () {
        chai_1.assert.isNull(Linq.Repeat(null, 1).ElementAtOrDefault(5));
    });
    it('ElementAtOrDefault() - Default Undefined', function () {
        chai_1.assert.isUndefined(Linq.Repeat(undefined, 1).ElementAtOrDefault(5));
    });
    it('ElementAtOrDefault() - Default Object', function () {
        chai_1.assert.isUndefined(Linq.From([this, this, {}]).ElementAtOrDefault(5));
    });
    it('ElementAtOrDefault() - Default String', function () {
        chai_1.assert.isString(Linq.Repeat("String", 3).ElementAtOrDefault(5));
    });
    it('ElementAtOrDefault() - Default Symbol', function () {
        chai_1.assert.isDefined(Linq.From([Symbol(), Symbol]).ElementAtOrDefault(5));
    });
    it('ElementAtOrDefault() - Default Function', function () {
        chai_1.assert.isUndefined(Linq.Repeat(() => { }, 3).ElementAtOrDefault(5));
    });
    it('ElementAtOrDefault() - Default Class', function () {
        class Polygon {
            constructor(height = 0, width = 1) {
                this.height = height;
                this.width = width;
                this.height = height;
                this.width = width;
            }
        }
        chai_1.assert.isUndefined(Linq.Repeat(Polygon, 3).ElementAtOrDefault(5));
    });
    // First
    it('First() - No predicate', function () {
        chai_1.assert.equal(1, Linq.From(data_1.simpleArray).First());
    });
    it('First()', function () {
        chai_1.assert.equal(6, Linq.From(data_1.simpleArray).First(a => a > 5));
    });
    it('First() - Empty', function () {
        chai_1.assert.throw(function () {
            chai_1.assert.equal(6, Linq.From(data_1.simpleArray).First(a => a > 50));
        });
    });
    // FirstOrDefault
    it('FirstOrDefault() - No predicate', function () {
        chai_1.assert.equal(1, Linq.From(data_1.simpleArray).FirstOrDefault());
    });
    it('FirstOrDefault()', function () {
        chai_1.assert.equal(6, Linq.From(data_1.simpleArray).FirstOrDefault(a => a > 5));
    });
    it('FirstOrDefault() - Empty', function () {
        chai_1.assert.doesNotThrow(function () {
            chai_1.assert.equal(0, Linq.From(data_1.simpleArray).FirstOrDefault(a => a > 50));
        });
    });
    // Last
    it('Last() - No predicate', function () {
        chai_1.assert.equal(10, Linq.From(data_1.simpleArray).Last());
    });
    it('Last()', function () {
        chai_1.assert.equal(4, Linq.From(data_1.simpleArray).Last(a => a < 5));
    });
    it('Last() - Empty', function () {
        chai_1.assert.throw(function () {
            Linq.From(data_1.simpleArray).Last(a => a > 50);
        });
    });
    // LastOrDefault
    it('LastOrDefault() - No predicate', function () {
        chai_1.assert.equal(10, Linq.From(data_1.simpleArray).LastOrDefault());
    });
    it('LastOrDefault()', function () {
        chai_1.assert.equal(4, Linq.From(data_1.simpleArray).LastOrDefault(a => a < 5));
    });
    it('LastOrDefault() - Empty', function () {
        chai_1.assert.doesNotThrow(function () {
            chai_1.assert.equal(0, Linq.From(data_1.simpleArray).LastOrDefault(a => a > 50));
        });
    });
    // SequenceEqual
    it('SequenceEqual() - Array', function () {
        chai_1.assert.isTrue(Linq.From(data_1.simpleArray).SequenceEqual(data_1.simpleArray));
    });
    it('SequenceEqual() - Linq', function () {
        chai_1.assert.isTrue(Linq.From(data_1.simpleArray).SequenceEqual(Linq.From(data_1.simpleArray)));
    });
    it('SequenceEqual() - Shorter', function () {
        chai_1.assert.isFalse(Linq.From([1, 2, 3, 4, 5, 6]).SequenceEqual(data_1.simpleArray));
    });
    it('SequenceEqual() - Longer', function () {
        chai_1.assert.isFalse(Linq.From(data_1.simpleArray).SequenceEqual([1, 2, 3, 4, 5, 6]));
    });
    it('SequenceEqual() - Not Equal', function () {
        chai_1.assert.isFalse(Linq.From(data_1.simpleArray).SequenceEqual([1, 2, 3, 4, 50, 6, 7, 8, 9, 10]));
    });
    // Singel
    it('Single() - No predicate', function () {
        chai_1.assert.equal(4, Linq.From([4]).Single());
    });
    it('Single()', function () {
        chai_1.assert.equal(2, Linq.From(data_1.simpleArray).Single(a => a == 2));
    });
    it('Single() - Empty', function () {
        chai_1.assert.throw(function () {
            Linq.From(data_1.simpleArray).Single(a => a > 15);
        });
    });
    it('Single() - More than one', function () {
        chai_1.assert.throw(function () {
            Linq.From(data_1.simpleArray).Single(a => a > 5);
        });
    });
    // SingleOrDefault
    it('SingleOrDefault() - No predicate', function () {
        chai_1.assert.equal(4, Linq.From([4]).SingleOrDefault());
    });
    it('SingleOrDefault()', function () {
        chai_1.assert.equal(2, Linq.From(data_1.simpleArray).SingleOrDefault(a => a == 2));
    });
    it('SingleOrDefault() - Empty', function () {
        chai_1.assert.equal(0, Linq.From(data_1.simpleArray).SingleOrDefault(a => a == 20));
    });
    it('SingleOrDefault() - More than one', function () {
        chai_1.assert.Throw(function () {
            Linq.From(data_1.simpleArray).SingleOrDefault(a => a > 5);
        });
    });
    // Sum
    it('Sum() - No predicate', function () {
        chai_1.assert.equal(55, Linq.From(data_1.simpleArray).Sum());
    });
    it('Sum()', function () {
        chai_1.assert.equal(10, Linq.From(data_1.jsn).Sum(o => o.id));
    });
    // ToArray
    it('ToArray()', function () {
        chai_1.assert.isArray(Linq.From(data_1.simpleArray).ToArray());
    });
    // ToMap
    it('ToMap() - No Selector', function () {
        chai_1.assert.equal(data_1.jsn[0], Linq.From(data_1.jsn).ToMap(o => o.id).get(1));
    });
    it('ToMap()', function () {
        chai_1.assert.equal(data_1.jsn[0].name, Linq.From(data_1.jsn).ToMap(k => k.id, o => o.name).get(1));
    });
    it('ToDictionary() - No Selector', function () {
        chai_1.assert.equal(data_1.jsn[0], Linq.From(data_1.jsn).ToDictionary(o => o.id).get(1));
    });
    it('ToDictionary()', function () {
        chai_1.assert.equal(data_1.jsn[0].name, Linq.From(data_1.jsn).ToDictionary(k => k.id, o => o.name).get(1));
    });
});
/** Copyright (c) ENikS.  All rights reserved. */
//# sourceMappingURL=immediate.js.map